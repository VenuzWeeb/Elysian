package com.elysian.client.module.modules.exploit;

import net.minecraft.init.Items;
import net.minecraft.inventory.ClickType;
import net.minecraft.network.play.client.CPacketHeldItemChange;
import net.minecraft.network.play.client.CPacketPlayerTryUseItem;
import net.minecraft.network.play.server.SPacketAnimation;
import net.minecraft.util.EnumHand;
import net.minecraft.util.math.BlockPos;
import net.minecraftforge.fml.common.gameevent.TickEvent;

import com.elysian.client.event.events.PacketEvent;
import com.elysian.client.module.ModuleType;
import com.elysian.client.module.ToggleableModule;
import com.elysian.client.util.cousinware.InventoryUtil;

public class GhostGap extends ToggleableModule {


    public GhostGap() {
        super("GhostGap", new String[] {"ghostgap"}, "self explanatory", ModuleType.EXPLOIT);
        this.offerProperties(this.keybind);
    }
    
    @Override
    protected void onEnable() {
        super.onEnable();
        mc.playerController.windowClick(0, mc.player.inventory.currentItem+36, 0, ClickType.PICKUP, mc.player);
        mc.playerController.windowClick(0, 45, 0, ClickType.PICKUP, mc.player);
        CPacketPlayerTryUseItem packet = new CPacketPlayerTryUseItem(EnumHand.OFF_HAND);
        mc.player.connection.sendPacket(packet);
        mc.playerController.windowClick(0, 45, 0, ClickType.PICKUP, mc.player);
        mc.playerController.windowClick(0, mc.player.inventory.currentItem+36, 0, ClickType.PICKUP, mc.player);
    }

    @Override
    public void packet(PacketEvent event) {
        if (event.getPacket() instanceof SPacketAnimation) {
            SPacketAnimation pak = (SPacketAnimation) event.getPacket();
            if (pak.getEntityID() != mc.player.getEntityId()) return;
            event.setCancelled(true);;
        }
    }

    public static BlockPos getPlayerPos() {
        return new BlockPos(Math.floor(mc.player.posX), Math.floor(mc.player.posY), Math.floor(mc.player.posZ));
    }

}
